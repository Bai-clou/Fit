{"version":3,"sources":["webpack:///C:/documents/javaprojects/Fit/uniapp/uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue?8d5e","uni-app:///uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue","webpack:///C:/documents/javaprojects/Fit/uniapp/uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue?9830","webpack:///C:/documents/javaprojects/Fit/uniapp/uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue?6c5f","webpack:///C:/documents/javaprojects/Fit/uniapp/uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue?3438","webpack:///C:/documents/javaprojects/Fit/uniapp/uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue?6942","webpack:///C:/documents/javaprojects/Fit/uniapp/uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue?0d95"],"names":["name","components","DateBox","props","duration","type","default","cellHeight","dateActiveColor","sundayIndex","mode","changeSetDefault","defaultSelectedDate","showArrowBtn","data","today","selectedDate","week","current","calendarSwiperDates","swiperChangeByClick","swiperMode","monthDateCache","emitTimer","dateClick","computed","getcurCalendarDates","getAdjacentYMD","getAssignDateInfo","showBackToTodayBtn","swiperHeight","watch","deep","handler","setTimeout","clearTimeout","created","methods","init","initWeek","normalWeek","adjacentSortByCurrent","arr","generateAdjacentMonthDate","year","month","cur","next","generateMonthDateCache","date","dateFormat","calendarDate","isSelected","swiperChange","theDateIsToday","item","getCalendarShrinkSwiperDates","prevYM","curYM","nextYM","prev","switchCalendar","getPrevOrNextDate","goToDate","chooseDate","emitDate"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAowB,CAAgB,qtBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkDxxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACAC;MAAA;MACAC;MACAC;IACA;IACAC;MAAA;MACAF;MACAC;IACA;IACAE;MAAA;MACAH;MACAC;IACA;IACAG;MAAA;MACAJ;MACAC;IACA;IACAI;MAAA;MACAL;MACAC;IACA;IACAK;MAAA;MACAN;MACAC;IACA;IACAM;MAAA;MACAP;MACAC;IACA;IACAO;MAAA;MACAR;MACAC;IACA;EACA;EACAQ;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;QAAA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MAAA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACAb;MACA;QAAA;QACA;QACA;MACA;MACA;QAAA;QACA;QACA;MACA;MACA;QAAA;QACA;MACA;QAAA;QACA;MACA;IACA;IACAF;MACAgB;MACAC;QAAA;QACA;QACA;UACAC;YACA;UACA;QACA;QACA;UAAA;UACA;UACA;QACA;UAAA;UACA;YACAC;YACA;UACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;QAAA;QACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACAC;MACAA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAC;MACA;QACAA;MACA;QACAA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UAAA;UAAAC;UAAAC;QACAH;MACA;MACA;QAAAI;QAAAC;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACAJ;MACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;UACA;YACAD;YACAC;YACAI;YACAC;YACA7C;UACA;UACA;UACA;UACA8C;QACA;MACA;MACA;MACA;QACA;UACAP;UACAC;UACAI;UACAG;UACAF;UACA7C;QACA;QACA;QACA;QACA8C;MACA;MACA;MACA;MACA;QACA;UACA;YACAP;YACAC;YACAI;YACAC;YACA7C;UACA;UACA;UACA;UACA8C;QACA;MACA;MACA;MACA;IACA;IACA;IACAE;MAAA;MACA;MACA;QACA;MACA;MACA;QAAA;QACA;QACAnB;UACA;QACA;MACA;IACA;IACA;IACAoB;MACA;QACAC;MACA;IACA;IACA;IACAC;MACA;QAAAC;QAAAC;QAAAC;MACA;MACA;MACA;MACA;QAAA;MAAA;MACA;MACA;MACA;MACA;AACA;AACA;AACA;MACA;QACA;QACA;QACA;QACA;QACA;UAAA;UACAC;QACA;UACAA;QACA;MACA;QACAA;MACA;MACA;AACA;AACA;AACA;MACA;QACA;QACA;QACA;UAAA;UACAb;QACA;UACAA;QACA;MACA;QACAA;MACA;MACA;IACA;IACA;IACAc;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;QACAjB;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACA;IACAkB;MAAA;MACA;QACA;QACA;UACAd;QACA;MACA;QACA;MACA;MACA;MACA;IACA;IACA;IACAe;MACA;MACA;MACA;QAAA;QACA;QACA;UACA;YAAA;YACA;UACA;YAAA;YACA;UACA;UACA;UACA;QACA;UACA;QACA;MACA;QAAA;QACA;QACA;UACA;UACA;QACA;QACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;QACAjD;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;ACxaA;AAAA;AAAA;AAAA;AAAqlC,CAAgB,g/BAAG,EAAC,C;;;;;;;;;;;ACAzmC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACa;;;AAGxE;AACkM;AAClM,gBAAgB,gMAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA","file":"uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.js","sourcesContent":["import mod from \"-!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zsy-calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zsy-calendar.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 日历滚动插件 -->\r\n\t<view class=\"zsy_calendar\">\r\n\t\t<!-- 日历顶部信息 -->\r\n\t\t<view class=\"calendar_info\">\r\n\t\t\t<text class=\"title\">每日记录</text>\r\n\t\t\t<text class=\"desc\">\r\n\t\t\t\t({{ getAssignDateInfo(false, 0) === getAssignDateInfo(true, 0) ? '' : getAssignDateInfo(false, 0) + '年' }}{{ getAssignDateInfo(false, 1) }}月)\r\n\t\t\t</text>\r\n\t\t\t<text v-show=\"showBackToTodayBtn\" class=\"backToToday\" :style=\"{color: dateActiveColor}\" @tap=\"goToDate()\">回到今天</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 日历周数 -->\r\n\t\t<view class=\"calendar_week\">\r\n\t\t\t<view v-for=\"(item, index) in week\" :key=\"index\" class=\"calendar_week__item\">{{ item }}</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 日历轮播 -->\r\n\t\t<view class=\"calendar_swiper\">\r\n\t\t\t<swiper\r\n\t\t\t\tkey=\"normalSwiper\"\r\n\t\t\t\tcircular\r\n\t\t\t\t:style=\"{height: swiperHeight}\"\r\n\t\t\t\t:current=\"current\"\r\n\t\t\t\t:duration=\"duration\"\r\n\t\t\t\t:skip-hidden-item-layout=\"true\"\r\n\t\t\t\t@change=\"e => current = e.detail.current\"\r\n\t\t\t>\r\n\t\t\t\t<swiper-item v-for=\"(swiper, swiperIndex) in 3\" :key=\"swiperIndex\" class=\"swiper-item\">\r\n\t\t\t\t\t<DateBox\r\n\t\t\t\t\t\t:dates=\"getcurCalendarDates[swiperIndex]\"\r\n\t\t\t\t\t\t:cellHeight=\"cellHeight\"\r\n\t\t\t\t\t\t:selectedDate=\"selectedDate\"\r\n\t\t\t\t\t\t:dateActiveColor=\"dateActiveColor\"\r\n\t\t\t\t\t\t:swiperMode=\"swiperMode\"\r\n\t\t\t\t\t\t:showActive=\"emitTimer === null\"\r\n\t\t\t\t\t\t@chooseDate=\"chooseDate\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\t\r\n\t\t<!-- 日历切换模式 -->\r\n\t\t<view class=\"calendar_toggle\" @tap=\"swiperMode = swiperMode === 'open' ? 'close' : 'open'\">\r\n\t\t\t<view class=\"icon\" :class=\"{down: swiperMode === 'close'}\"></view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { parseTime, deepClone } from './js/utils.js'\r\n\timport DateBox from './dateBox.vue'\r\n\texport default {\r\n\t\tname: 'ZsyCalendar',\r\n\t\tcomponents: {\r\n\t\t\tDateBox\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tduration: { // 轮播图动画时长\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 300\r\n\t\t\t},\r\n\t\t\tcellHeight: { // 一列的高度\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 75\r\n\t\t\t},\r\n\t\t\tdateActiveColor: { // 日期选中颜色\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#FE6601'\r\n\t\t\t},\r\n\t\t\tsundayIndex: { // 星期天所在索引，0表示第一个、6表示最后一个\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 6\r\n\t\t\t},\r\n\t\t\tmode: { // 日历模式\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'open'\r\n\t\t\t},\r\n\t\t\tchangeSetDefault: { // 月份切换时是否显示一号还是当前月份选中高亮\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tdefaultSelectedDate: { // 默认选中日期\r\n\t\t\t\ttype: String | null,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t\tshowArrowBtn: { // 是否显示左右切换按钮\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttoday: parseTime(new Date(), '{y}-{m}-{d}'), // 今天日期\r\n\t\t\t\tselectedDate: null, // 选中日期\r\n\t\t\t\tweek: [], // 日历周数\r\n\t\t\t\tcurrent: 1, // 当前日历轮播默认显示索引\r\n\t\t\t\tcalendarSwiperDates: [], // 日历轮播日期信息\r\n\t\t\t\tswiperChangeByClick: false, // 是否通过点击上月份或下月份的日期进行轮播切换\r\n\t\t\t\tswiperMode: this.mode, // 日历轮播显示模式 open：展开 close：收缩\r\n\t\t\t\tmonthDateCache: {}, // 月份日期缓存数据\r\n\t\t\t\temitTimer: null, // 日期改变向父级传递当前选中日期计时器\r\n\t\t\t\tdateClick: false // 是否进行了日期的点击选择\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 返回当前日期信息（展开状态下为每月，收缩状态下为每周）\r\n\t\t\tgetcurCalendarDates() {\r\n\t\t\t\tif (this.swiperMode === 'open') { // 展开\r\n\t\t\t\t\treturn this.calendarSwiperDates\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.getCalendarShrinkSwiperDates()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 计算选中日期的上月、本月、下月的年月信息\r\n\t\t\tgetAdjacentYMD() {\r\n\t\t\t\tconst year = this.getAssignDateInfo(false, 0)\r\n\t\t\t\tconst month = this.getAssignDateInfo(false, 1)\r\n\t\t\t\tconst prev = `${month === 1 ? year - 1 : year}-${month === 1 ? 12 : month - 1}`\r\n\t\t\t\tconst cur = `${year}-${month}`\r\n\t\t\t\tconst next = `${month === 12 ? year + 1 : year}-${month === 12 ? 1 : month + 1}`\r\n\t\t\t\treturn [prev, cur, next]\r\n\t\t\t},\r\n\t\t\t/* 获取指定日期信息\r\n\t\t\tisToday: 是否获取当天的信息还是选中日期的信息\r\n\t\t\tindex: 0 表示年份 1 表示月份 2 表示日期 */\r\n\t\t\tgetAssignDateInfo() {\r\n\t\t\t\treturn (isToday, index) => {\r\n\t\t\t\t\treturn (isToday ? this.today : this.selectedDate).split('-')[index] * 1\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 是否显示回到今天按钮\r\n\t\t\tshowBackToTodayBtn() {\r\n\t\t\t\treturn this.getAssignDateInfo(false, 0) !== this.getAssignDateInfo(true, 0) || this.getAssignDateInfo(false, 1) !== this.getAssignDateInfo(true, 1)\r\n\t\t\t},\r\n\t\t\t// 返回轮播图高度\r\n\t\t\tswiperHeight() {\r\n\t\t\t\tconst normalHeight = (this.calendarSwiperDates[this.current] || []).length / 7 * (this.cellHeight + 20) + 'rpx'\r\n\t\t\t\tconst shrinkHeight = this.cellHeight + 20 + 'rpx'\r\n\t\t\t\treturn this.swiperMode === 'open' ? normalHeight : shrinkHeight\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t// 展开日历轮播切换\r\n\t\t\tcurrent(newV, oldV) {\r\n\t\t\t\tif (newV === 0 && oldV === 2) { // 右滑\r\n\t\t\t\t\tthis.swiperChange(1)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (newV === 2 && oldV === 0) { // 左滑\r\n\t\t\t\t\tthis.swiperChange(-1)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (newV > oldV) { // 右滑\r\n\t\t\t\t\tthis.swiperChange(1)\r\n\t\t\t\t} else { // 左滑\r\n\t\t\t\t\tthis.swiperChange(-1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tselectedDate: {\r\n\t\t\t\tdeep: true,\r\n\t\t\t\thandler(newV, oldV) {\r\n\t\t\t\t\t// 判断月历日期数据需不需要改变\r\n\t\t\t\t\tif (this.swiperMode === 'close') {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.generateAdjacentMonthDate() // 生成临近月份日期缓存数据\r\n\t\t\t\t\t\t}, this.duration);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (newV && (oldV === null || this.dateClick)) { // 初始化/日历点击选择时直接返回\r\n\t\t\t\t\t\tthis.emitDate()\r\n\t\t\t\t\t\tthis.dateClick = false\r\n\t\t\t\t\t} else { // 其它情况做防抖处理\r\n\t\t\t\t\t\tif (this.emitTimer !== null) {\r\n\t\t\t\t\t\t\tclearTimeout(this.emitTimer)\r\n\t\t\t\t\t\t\tthis.emitTimer = null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.emitTimer = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.emitDate()\r\n\t\t\t\t\t\t\tthis.emitTimer = null\r\n\t\t\t\t\t\t}, this.duration + 200)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.init() // 初始化数据\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 初始化数据\r\n\t\t\tinit() {\r\n\t\t\t\tif (this.selectedDate === null) { // 默认选中日期为当天\r\n\t\t\t\t\tthis.selectedDate = this.defaultSelectedDate || this.today\r\n\t\t\t\t}\r\n\t\t\t\tthis.initWeek() // 初始化要显示的周数\r\n\t\t\t\tthis.generateAdjacentMonthDate() // 生成临近月份日期缓存数据\r\n\t\t\t},\r\n\t\t\t// 初始化周数\r\n\t\t\tinitWeek() {\r\n\t\t\t\tconst normalWeek = ['日', '一', '二', '三', '四', '五', '六'] // 正常周数\r\n\t\t\t\tconst sIndex = this.sundayIndex < 0 ? 0 : this.sundayIndex >= normalWeek.length ? normalWeek.length - 1 : this.sundayIndex\r\n\t\t\t\tnormalWeek.unshift(...normalWeek.slice(-sIndex))\r\n\t\t\t\tnormalWeek.length = 7\r\n\t\t\t\tthis.week = normalWeek\r\n\t\t\t},\r\n\t\t\t// 根据current自动对轮播数据进行衔接排序\r\n\t\t\tadjacentSortByCurrent(prev, cur, next) {\r\n\t\t\t\tlet arr\r\n\t\t\t\tif (this.current === 0) {\r\n\t\t\t\t\tarr = [cur, next, prev]\r\n\t\t\t\t} else if (this.current === 1) {\r\n\t\t\t\t\tarr = [prev, cur, next]\r\n\t\t\t\t} else if (this.current === 2) {\r\n\t\t\t\t\tarr = [next, prev, cur]\r\n\t\t\t\t}\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\t// 生成本月、上个月、下个月日期信息\r\n\t\t\tgenerateAdjacentMonthDate() {\r\n\t\t\t\tconst arr = []\r\n\t\t\t\tthis.getAdjacentYMD.map(YM => {\r\n\t\t\t\t\tconst [year, month] = YM.split('-')\r\n\t\t\t\t\tarr.push(this.generateMonthDateCache(year, month))\r\n\t\t\t\t})\r\n\t\t\t\tconst [prev, cur, next] = arr\r\n\t\t\t\tthis.calendarSwiperDates = this.adjacentSortByCurrent(prev, cur, next)\r\n\t\t\t\tif (this.swiperChangeByClick) {\r\n\t\t\t\t\tthis.swiperChangeByClick = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 生成月份日期缓存数据并返回\r\n\t\t\tgenerateMonthDateCache(year, month) {\r\n\t\t\t\tyear = Number(year)\r\n\t\t\t\tmonth = Number(month)\r\n\t\t\t\t// 缓存中已存在\r\n\t\t\t\tif (this.monthDateCache[`${year}-${month}`]) return this.monthDateCache[`${year}-${month}`]\r\n\t\t\t\tlet calendarDate = []\r\n\t\t\t\tconst monthDates = new Date(year, month, 0).getDate() // 获取此月份总天数\r\n\t\t\t\tconst normalWeek = ['一', '二', '三', '四', '五', '六', '日'] // 正常周数\r\n\t\t\t\tconst monthFirstDay = normalWeek[new Date(year, month - 1, 0).getDay()] // 获取本月一号为星期几\r\n\t\t\t\tconst monthFirstDayIndex = this.week.indexOf(monthFirstDay) // 计算本月一号在日历周数中的索引，索引之前的填充上个月的后几天\r\n\t\t\t\t// 本月一号在日历中不是第一个位置，需要进行填充\r\n\t\t\t\tif (monthFirstDayIndex !== 0) {\r\n\t\t\t\t\tconst prevMonthDates = new Date(year, month - 1, 0).getDate() // 获取上一个月份的总天数\r\n\t\t\t\t\t// 填充本月一号之前的数据\r\n\t\t\t\t\tfor (let i = 0; i < monthFirstDayIndex; i ++) {\r\n\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\tyear: month === 1 ? year - 1 : year,\r\n\t\t\t\t\t\t\tmonth: month === 1 ? 12 : month - 1,\r\n\t\t\t\t\t\t\tdate: prevMonthDates - i,\r\n\t\t\t\t\t\t\tdateFormat: `${month === 1 ? year - 1 : year}-${String(month === 1 ? 12 : month - 1).padStart(2, '0')}-${String(prevMonthDates - i).padStart(2, '0')}`,\r\n\t\t\t\t\t\t\ttype: 'prev'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 判断填充的日期是否包含今天日期\r\n\t\t\t\t\t\tthis.theDateIsToday(item)\r\n\t\t\t\t\t\tcalendarDate.unshift(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 循环生成当月所有日期\r\n\t\t\t\tfor (let i = 1; i <= monthDates; i ++) {\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\tyear,\r\n\t\t\t\t\t\tmonth,\r\n\t\t\t\t\t\tdate: i,\r\n\t\t\t\t\t\tisSelected: false,\r\n\t\t\t\t\t\tdateFormat: `${year}-${String(month).padStart(2, '0')}-${String(i).padStart(2, '0')}`,\r\n\t\t\t\t\t\ttype: 'cur'\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 今天的日期在不在里面\r\n\t\t\t\t\tthis.theDateIsToday(item)\r\n\t\t\t\t\tcalendarDate.push(item)\r\n\t\t\t\t}\r\n\t\t\t\tconst residue = calendarDate.length % 7\r\n\t\t\t\t// 判断是否需要填充下个月的前几天\r\n\t\t\t\tif (residue !== 0) {\r\n\t\t\t\t\tfor (let i = 1; i <= 7 - residue; i ++) {\r\n\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\tyear: month === 12 ? year + 1 : year,\r\n\t\t\t\t\t\t\tmonth: month === 12 ? 1 : month + 1,\r\n\t\t\t\t\t\t\tdate: i,\r\n\t\t\t\t\t\t\tdateFormat: `${month === 12 ? year + 1 : year}-${String(month === 12 ? 1 : month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`,\r\n\t\t\t\t\t\t\ttype: 'next'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 下个月的前几天包含今天\r\n\t\t\t\t\t\tthis.theDateIsToday(item)\r\n\t\t\t\t\t\tcalendarDate.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.monthDateCache[`${year}-${month}`] = deepClone(calendarDate)\r\n\t\t\t\treturn this.monthDateCache[`${year}-${month}`]\r\n\t\t\t},\r\n\t\t\t// 轮播图切换结束\r\n\t\t\tswiperChange(e) {\r\n\t\t\t\t// 切换上个月/下个月，默认选中一号 / 切换上一周/下一周，默认选中第一天\r\n\t\t\t\tif (!this.swiperChangeByClick) {\r\n\t\t\t\t\tthis.getPrevOrNextDate(e)\r\n\t\t\t\t}\r\n\t\t\t\tif (this.swiperMode === 'open') { // 展开\r\n\t\t\t\t\t// 通过点击上个月/下个月日期进行切换，不需要默认选中下个月的一号，直接选中点击的那个日期\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.generateAdjacentMonthDate() // // 重新生成临近月份日期缓存数据\r\n\t\t\t\t\t}, this.duration)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 判断日期是否为今天\r\n\t\t\ttheDateIsToday(item) {\r\n\t\t\t\tif (`${item.year}${item.month}${item.date}` === `${this.getAssignDateInfo(true, 0)}${this.getAssignDateInfo(true, 1)}${this.getAssignDateInfo(true, 2)}`) {\r\n\t\t\t\t\titem.isToday = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 计算收缩时的日历轮播日期信息\r\n\t\t\tgetCalendarShrinkSwiperDates() {\r\n\t\t\t\tconst [prevYM, curYM, nextYM] = this.getAdjacentYMD\r\n\t\t\t\t// 本月日期数据\r\n\t\t\t\tconst curDates = this.monthDateCache[curYM]\r\n\t\t\t\t// 计算当前日期所在行\r\n\t\t\t\tconst line = Math.floor(curDates.map(item => item.dateFormat).indexOf(this.selectedDate) / 7)\r\n\t\t\t\t// 当前周日期信息\r\n\t\t\t\tconst cur = curDates.slice(line * 7, (line + 1) * 7)\r\n\t\t\t\tlet prev, next\r\n\t\t\t\t/**\r\n\t\t\t\t * 获取上一周日期信息\r\n\t\t\t\t * 注意：当选中日期为第一周要额外判断，如果刚好为日历的第一天，则上一周数据应为上一个月的最后一周，否则为上一个月的倒数第二周\r\n\t\t\t\t */ \r\n\t\t\t\tif (line === 0) {\r\n\t\t\t\t\t// 获取上个月日历数据\r\n\t\t\t\t\tconst prevDates = this.monthDateCache[prevYM]\r\n\t\t\t\t\t// 获取上个月的日历行数\r\n\t\t\t\t\tconst prevDatesLine = prevDates.length / 7\r\n\t\t\t\t\tif (curDates[0].dateFormat === this.selectedDate) { // 选中日期刚好为日历第一天\r\n\t\t\t\t\t\tprev = prevDates.slice((prevDatesLine - 1) * 7) // 上个月倒数第一周数据\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprev = prevDates.slice((prevDatesLine - 2) * 7, (prevDatesLine - 1) * 7) // 上个月倒数第二周数据\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev = curDates.slice((line - 1) * 7, line * 7)\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t * 获取下一周日期信息\r\n\t\t\t\t * 注意：当选中日期为最后一周要额外判断，如果刚好为日历的最后一天，则下一周数据应为下一个月的第一周，否则为下一个月的第二周\r\n\t\t\t\t */ \r\n\t\t\t\tif (line + 1 === curDates.length / 7) {\r\n\t\t\t\t\t// 获取下个月的日期数据\r\n\t\t\t\t\tconst nextDates = this.monthDateCache[nextYM]\r\n\t\t\t\t\tif (curDates[curDates.length - 1].dateFormat === this.selectedDate) { // 选中日期刚好为日历最后一天\r\n\t\t\t\t\t\tnext = nextDates.slice(0, 7) // 下个月第一周数据\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnext = nextDates.slice(7, 14) // 下个月第二周数据\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext = curDates.slice((line + 1) * 7, (line + 2) * 7)\r\n\t\t\t\t}\r\n\t\t\t\treturn this.adjacentSortByCurrent(prev, cur, next)\r\n\t\t\t},\r\n\t\t\t// 手动切换日历\r\n\t\t\tswitchCalendar(type) {\r\n\t\t\t\tconst currentKey = this.swiperMode === 'close' ? 'shrinkCurrent' : 'current'\r\n\t\t\t\tconst v = this[currentKey] + (type === 'prev' ? -1 : 1)\r\n\t\t\t\tthis[currentKey] = v === -1 ? 2 : v === 3 ? 0 : v\r\n\t\t\t},\r\n\t\t\t// 获取月的一号日期/周的第一天\r\n\t\t\tgetPrevOrNextDate(type) {\r\n\t\t\t\tif (this.swiperMode === 'open') {\r\n\t\t\t\t\tconst year = this.getAssignDateInfo(false, 0)\r\n\t\t\t\t\tlet month = this.getAssignDateInfo(false, 1)\r\n\t\t\t\t\tmonth = month + type\r\n\t\t\t\t\t// 判断切换月份时选中当前日期高亮还是一号，若选中当前日期高亮需进行大小判断\r\n\t\t\t\t\tconst curActiveDate = this.getAssignDateInfo(false, 2)\r\n\t\t\t\t\tconst maxDate = new Date(year, month, 0).getDate()\r\n\t\t\t\t\tconst date = this.changeSetDefault ? 1 : curActiveDate > maxDate ? maxDate : curActiveDate\r\n\t\t\t\t\tthis.selectedDate = parseTime(new Date(year, month - 1, date), '{y}-{m}-{d}')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet current = this.current + type < 0 ? 2 : this.current + type > 2 ? 0 : this.current + type\r\n\t\t\t\t\tthis.selectedDate = this.getcurCalendarDates[current][0].dateFormat\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 前往某一天 格式 YYYY-MM | YYYY-MM-DD\r\n\t\t\tgoToDate(date = this.today) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (date.split('-').length < 2 || date.split('-').length > 3) throw '参数有误'\r\n\t\t\t\t\tif (date.split('-').length === 2) {\r\n\t\t\t\t\t\tdate += '-01'\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tthrow Error('请检查参数是否符合规范')\r\n\t\t\t\t}\r\n\t\t\t\tthis.selectedDate = date\r\n\t\t\t\tthis.generateAdjacentMonthDate()\r\n\t\t\t},\r\n\t\t\t// 日历轮播展开的情况下选择日期\r\n\t\t\tchooseDate(dateInfo) {\r\n\t\t\t\t// 重复点击后续不做处理\r\n\t\t\t\tif (dateInfo.dateFormat === this.selectedDate) return false\r\n\t\t\t\tif (this.swiperMode === 'open') { // 展开\r\n\t\t\t\t\t// 是否点击了上个月份的后几天或者点击了下个月份的前几天\r\n\t\t\t\t\tif (dateInfo.type !== 'cur') {\r\n\t\t\t\t\t\tif (dateInfo.type === 'prev') { // 点击了上个月份的后几天，滑到上个月\r\n\t\t\t\t\t\t\tthis.current = this.current === 0 ? 2 : this.current - 1\r\n\t\t\t\t\t\t} else { // 点击了下个月份的前几天，滑到下个月\r\n\t\t\t\t\t\t\tthis.current = this.current === 2 ? 0 : this.current + 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 将选中日期赋值为当前点击的那个日期\r\n\t\t\t\t\t\tthis.swiperChangeByClick = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.dateClick = true\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { // 收缩\r\n\t\t\t\t\t// 是否点击了上个月份的后几天或者点击了下个月份的前几天\r\n\t\t\t\t\tif (dateInfo.type !== 'cur') {\r\n\t\t\t\t\t\t// 将选中日期赋值为当前点击的那个日期\r\n\t\t\t\t\t\tthis.swiperChangeByClick = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.dateClick = true\r\n\t\t\t\t}\r\n\t\t\t\t// 将当前选中的日期清空并选中最新的日期\r\n\t\t\t\tthis.selectedDate = dateInfo.dateFormat\r\n\t\t\t},\r\n\t\t\t// 向父组件传递当前选中数据\r\n\t\t\temitDate() {\r\n\t\t\t\tconst e = {\r\n\t\t\t\t\tselectedDate: this.selectedDate\r\n\t\t\t\t}\r\n\t\t\t\tthis.$emit('change', e)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.zsy_calendar {\r\n\t\twidth: 100%;\r\n\t\tpadding: 20rpx 0;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n\t\r\n\t/* 日历顶部信息 */\r\n\t.calendar_info {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 20rpx;\r\n\t}\r\n\t.calendar_info .title {\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #2C2C2C;\r\n\t}\r\n\t.calendar_info .desc {\r\n\t\tmargin-left: 29rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #959595;\r\n\t}\r\n\t.calendar_info .backToToday {\r\n\t\tmargin-left: auto;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t/* 日历顶部信息 */\r\n\t\r\n\t/* 日历周数 */\r\n\t.calendar_week {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #959595;\r\n\t\tmargin: 20rpx 0rpx;\r\n\t}\r\n\t.calendar_week .calendar_week__item {\r\n\t\twidth: calc(100% / 7);\r\n\t\ttext-align: center;\r\n\t}\r\n\t/* 日历周数 */\r\n\t\r\n\t/* 日历切换模式 */\r\n\t.calendar_toggle {\r\n\t\tposition: relative;\r\n\t\tpadding: 10rpx 0;\r\n\t\tmargin: 10rpx 20rpx 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t.calendar_toggle .icon {\r\n\t\twidth: 30rpx;                \r\n\t\theight: 30rpx;\r\n\t\tbackground-image: url('../../static/arrow.png');\r\n\t\tbackground-size: contain;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tmargin: 0 auto;\r\n\t\ttransform: rotate(0deg);\r\n\t\ttransition: all .3s;\r\n\t}\r\n\t.icon.down {\r\n\t\ttransform: rotate(180deg);\r\n\t}\r\n\t.calendar_toggle::before, .calendar_toggle::after {\r\n\t\twidth: calc(50% - 30rpx);\r\n\t\tborder-top: solid 2rpx #EAEAEA;\r\n\t\tcontent: '';\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t}\r\n\t.calendar_toggle::before {\r\n\t\tleft: 0;\r\n\t}\r\n\t.calendar_toggle::after {\r\n\t\tright: 0;\r\n\t}\r\n\t/* 日历切换模式 */\r\n</style>\r\n","import mod from \"-!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zsy-calendar.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zsy-calendar.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1713429982262\n      var cssReload = require(\"C:/programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { render, staticRenderFns, recyclableRender, components } from \"./zsy-calendar.vue?vue&type=template&id=3b85b025&\"\nvar renderjs\nimport script from \"./zsy-calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./zsy-calendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zsy-calendar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/zsy-calendar/components/zsy-calendar/zsy-calendar.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../programs/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zsy-calendar.vue?vue&type=template&id=3b85b025&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.getAssignDateInfo(false, 0)\n  var m1 = _vm.getAssignDateInfo(true, 0)\n  var m2 = !(m0 === m1) ? _vm.getAssignDateInfo(false, 0) : null\n  var m3 = _vm.getAssignDateInfo(false, 1)\n  if (!_vm._isMounted) {\n    _vm.e0 = function (e) {\n      return (_vm.current = e.detail.current)\n    }\n    _vm.e1 = function ($event) {\n      _vm.swiperMode = _vm.swiperMode === \"open\" ? \"close\" : \"open\"\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }"],"sourceRoot":""}